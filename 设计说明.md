# Module3 流程与业务逻辑
#设计说明
**成员：** 杨昊 张远驰 何宇轩
[toc]
**** 

## 程序描述
### 登录模块
&emsp;&emsp;登录模块由其他小组负责，在登录完成后打开与后端交互的Session，并使用唯一ID对用户进行标识。
&emsp;&emsp;此模块的设计是整个系统中至关重要的一部分。一旦用户成功登录，系统需要确保其身份得到正确验证并且能够与后端进行有效的交互。登录模块由专门的小组负责，他们的任务包括实现安全可靠的用户认证机制以及建立与后端服务器的通信通道。
&emsp;&emsp;在用户成功通过身份验证后，登录模块负责打开一个与后端交互的Session。这个Session将被用来在用户和服务器之间传递数据，并确保通信的安全性和完整性。此外，为了更好地管理用户会话，登录模块会为每个用户分配一个唯一的ID，这个ID将在整个会话期间用于标识和跟踪用户的操作。
&emsp;&emsp;登录模块的任务还包括管理用户的登录状态，例如处理用户的注销请求、管理会话过期时间等。通过有效的登录模块设计，整个系统能够保障用户信息的安全性，确保只有经过授权的用户才能够访问系统资源，从而提升系统的整体安全性和稳定性。
### BPMN绘制模块
&emsp;&emsp;**功能1**：为用户提供web页面绘制业务流程图，生成BPMN文件，将结果保存至本地。
&emsp;&emsp;该功能使用户能够通过系统的web页面绘制业务流程图，通过直观的图形界面轻松设计复杂的流程结构。用户可以在页面上拖拽各种BPMN元素，连接它们，并定义流程中的各个步骤和决策点。完成后，系统将生成对应的BPMN文件，用户可以选择将结果保存至本地，以便日后的查看、修改或分享。这种直观的可视化设计不仅降低了业务人员理解和参与业务流程建模的门槛，同时也有助于减少错误，提高工作效率。生成的BPMN文件可以轻松地与Activiti引擎等BPMN支持的系统进行集成，实现无缝的流程执行。
&emsp;&emsp;**功能2**：为用户提供流程图模板，辅助用户基于模板进行流程定义
&emsp;&emsp;除了自由绘制，系统还为用户提供了一系列流程图模板，包括一些通用的业务流程模型，以及特定行业或业务场景的模板。用户可以基于这些模板进行流程定义，从而加速流程设计的过程。这种模板化的设计方法有助于规范化业务流程的建模，提高流程的一致性，并降低业务分析人员的学习成本。
（BPMN 即 Business Process Model and Notation，是一种用于描述业务流程的图形标记语言，可以用来建模和文档化数据流程，通常用于业务流程管理和工作流程建模。Activiti 引擎提供了对 BPMN 良好支持，可以对其进行储存、解析等操作。）

### BPMN解析模块

### 流程部署模块
&emsp;&emsp;**功能1**：用户在 web 页面中选择 BPMN 文件，进行流程部署
&emsp;&emsp;流程部署是 activiti 启动的第一步，部署完的流程将被存至数据库中，保存文件内容、流程定义相关的信息。
### 启动实例模块
&emsp;&emsp;**功能1**：根据权限，向用户展示其可以访问的已部署流程
&emsp;&emsp;**功能2**：用户选择需要发起的流程，在弹窗中输入需要指定的属性，启动流程实例
### 任务操作模块
&emsp;&emsp;**功能1**：用户完成分配给其的某项任务
&emsp;&emsp;**功能2**：为用户提供链接，查看与任务相关的信息

### 历史记录模块
&emsp;&emsp;**功能1**：向用户展示正在分派给他，或曾经分派给他的任务
&emsp;&emsp;**功能2**：历史记录过滤

## 整体架构
&emsp;&emsp;流程与业务逻辑模块基于 Activiti 逻辑引擎进行构建，并使用 Spring 框架整合。Activiti 是一个开源的业务流程管理（BPM）和工作流引擎，用于执行和自动化基于 BPMN 模型的业务流程。


### 登录
&emsp;&emsp;本模块使用该模块的用户都完成了登录，后端已经建立了 Session。登录模块由其他小组负责，我们需要的功能是在登录完成后打开与后端交互的 Session，并使用唯一ID对用户进行标识，将 ID 保存在会话中。本模块设计了类似的替代登录界面供调试使用，但没有对用户的身份信息做任何核验，知识单纯地获取了用户 ID。
### BPMN绘制
&emsp;&emsp;BPMN 绘制的页面有许多现成软件可以参考，且绘制 BPMN 图并非本项目重点。本项目提供前端配置BPMN的页面，使用户能基于我们的规则生成BPMN文件，并给用户提供页面以部署BPMN。
### 用户组分配
&emsp;&emsp;许多时候，某个任务可以同时被很多人看到，但只能有一个人进行处理。本模块提供用户组定义的接口，同时流程进行时也支持以组为单位的任务分配以及单角色任务认领。
&emsp;&emsp;
### BPMN解析
&emsp;&emsp;BPMN解析模块负责解析已部署流程中的未知属性，并区分他们在什么阶段是必填的。本模块支持动态填写流程中的属性，在流程实例化时部分属性为必填属性，需要在实例化之前完成填写，其余待填属性则须在任务流到达的时候填写。
### 部署流程
&emsp;&emsp;为用户提供界面上传绘制完成的BPMN图与流程图对应的图像文件。

### 启动流程实例
&emsp;&emsp;启动流程实例需要填写流程中的必填属性，在启动流程时解析BPMN得到必填属性列表，返还给用户进行填写，用户填写完成后依据填写的属性数据生成流程实例。

### 操作任务
&emsp;&emsp;
某一任务在完成时需要考虑与之相邻的属性

### 历史记录查询
&emsp;&emsp;

## API List
### 实体类
**MyTaskEntity**
|Type| Key|
|:----:|:----:|
|String| Id|
|String| name|
|String| owner|
|String| assignee|
|String| description|
|Date  |  createTime|
|Date  |  dueDate|

**MyDeploymentEntity**
|Type| Key|
|:----:|:----:|
|String |Id|
|String |name|
|String |description|
|Boolean| suspended|

**MyTaskHistoryEntity**
|Type| Key|
|:----:|:----:|
|String| Id|
|Date  | startTime|
|Date  | endTime|
|String| assignee|
|String| activityName |

**MyTaskEntity**
|Type| Key|
|:----:|:----:|

### 部署





| URL      | 功能     | 调用方法     | 传参方式     | 传入参数  | 返回值 |
| ----------- | ----------- | ----------- | ----------- | ----------- | ----------- |
|/deployment /getAll     | 获取所有部署     | get     | /     | /  | MyTaskEntity |
| /deployment/createInstance     | 启动流程  | get     | /     | /  | / |
| 。。。 |

# 分工与日志
## 分工情况
**杨昊**


**何宇轩**

**张远驰**


## 进度日志
### 迭代1
